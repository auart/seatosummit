<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sea to Summit</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Silkscreen&display=swap" rel="stylesheet">

<style>
html, body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:black;
  overflow:hidden;
}

/* Scale the whole game as one unit */
#stage{
  position:fixed;
  left:50%;
  top:50%;
  width:1920px;
  height:1080px;
  transform:translate(-50%, -50%) scale(1);
  transform-origin:center center;
}

/* ---------- START SCREEN ---------- */
#startScreen{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:black;
  z-index:999;
}

#beginBtn{
  background:none;
  border:none;
  padding:0;
  cursor:pointer;
  position:relative;
}

#beginBtn img{
  display:block;
  image-rendering:pixelated;
  height:120px;
}

#beginBtn span{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:"Press Start 2P";
  font-size:20px;
  color:#3a240f;
  pointer-events:none;
}

/* ---------- FRAME WRAPPER (CENTERED) ---------- */
/* These are your Illustrator window numbers */
#frameWrapper{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%, -50%);
  width:1920px;
  height:1080px;
  opacity:0;
  transition: opacity 900ms ease;
}

/* Frame image is exact 1920x1080 */
#frameImg{
  position:absolute;
  left:0;
  top:0;
  width:1920px;
  height:1080px;
  image-rendering:pixelated;
  pointer-events:none;
  z-index:5;
}

/* Logo image is exact 1920x1080 */
#logoImg{
  position:absolute;
  left:0;
  top:0;
  width:1920px;
  height:1080px;
  image-rendering:pixelated;
  pointer-events:none;
  opacity:0;
  transition: opacity 900ms ease;
  z-index:6;
}

/* ---------- WINDOW OPENING (POSITIONED INSIDE FRAME) ---------- */
/* Your measured opening coords */
#window{
  position:absolute;
  left:963.8801px;
  top:440.1124px;
  width:919.8045px;
  height:607.4107px;
  overflow:hidden;
  z-index:1;
}

/* The key fix: center the image inside the window */
#sceneImage, #waterOverlay{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%, -50%);
  min-width:100%;
  min-height:100%;
  image-rendering:pixelated;
}

/* Water overlay animation */
#waterOverlay{
  opacity:0.35;
  pointer-events:none;
  animation: waterMove 6s linear infinite;
}

@keyframes waterMove{
  0%   { transform: translate(-50%, -50%) translateX(0); }
  50%  { transform: translate(-50%, -50%) translateX(-12px); }
  100% { transform: translate(-50%, -50%) translateX(0); }
}

/* ---------- TEXT BOX (POSITIONED) ---------- */
/* Your measured textbox coords */
#dialogueWrap{
  position:absolute;
  left:965.8681px;
  top:862.4154px;
  width:813.4602px;
  height:83.053px;
  opacity:0;
  transition:opacity 500ms ease;
  overflow:hidden;
  z-index:10;
}

#dialogue{
  font-family:Silkscreen, monospace;
  font-size:20px;
  line-height:1.4;
  color:#3a240f;
  cursor:pointer;
}

/* ---------- CHOICE BUTTON ---------- */
#lookAroundWrap{
  position:absolute;
  left:50%;
  top:930px;
  transform:translateX(-50%);
  opacity:0;
  transition:opacity 600ms ease;
  pointer-events:none;
  z-index:20;
}

#lookAroundWrap.visible{
  opacity:1;
  pointer-events:auto;
}

#lookAroundBtn{
  background:none;
  border:none;
  padding:0;
  cursor:pointer;
  position:relative;
}

#lookAroundBtn img{
  display:block;
  image-rendering:pixelated;
  height:120px;
}

#lookAroundBtn span{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:"Press Start 2P";
  font-size:16px;
  color:#3a240f;
  pointer-events:none;
}

.visible{
  opacity:1 !important;
}
</style>
</head>

<body>

<div id="stage">

  <div id="startScreen">
    <button id="beginBtn" type="button">
      <img src="stsbutton.png" alt="">
      <span>Begin</span>
    </button>
  </div>

  <div id="frameWrapper">

    <div id="window">
      <img id="sceneImage" src="island_base.png" alt="">
      <img id="waterOverlay" src="water_overlay.png" alt="">
    </div>

    <img id="frameImg" src="stsframe2.png" alt="">
    <img id="logoImg" src="stslogo2.png" alt="">

    <div id="dialogueWrap">
      <div id="dialogue"></div>
    </div>

    <div id="lookAroundWrap">
      <button id="lookAroundBtn" type="button">
        <img src="stsbutton.png" alt="">
        <span>Look Around</span>
      </button>
    </div>

  </div>

  <audio id="music" src="starttheme.m4a" preload="auto" loop></audio>

</div>

<script>
const BASE_W = 1920;
const BASE_H = 1080;

function scaleStage(){
  const stage = document.getElementById("stage");
  const s = Math.min(window.innerWidth / BASE_W, window.innerHeight / BASE_H);
  stage.style.transform = "translate(-50%, -50%) scale(" + s + ")";
}
window.addEventListener("resize", scaleStage);

document.addEventListener("DOMContentLoaded", () => {
  scaleStage();

  const beginBtn = document.getElementById("beginBtn");
  const startScreen = document.getElementById("startScreen");

  const frameWrapper = document.getElementById("frameWrapper");
  const logoImg = document.getElementById("logoImg");

  const dialogueWrap = document.getElementById("dialogueWrap");
  const dialogue = document.getElementById("dialogue");

  const lookAroundWrap = document.getElementById("lookAroundWrap");
  const lookAroundBtn = document.getElementById("lookAroundBtn");

  const music = document.getElementById("music");

  const text = "You wake up on a beach. Warm sand, slow waves, no memory of how you got here.";

  function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }

  function fadeInMusic(){
    music.volume = 0;
    let v = 0;
    const fade = setInterval(() => {
      v += 0.02;
      music.volume = Math.min(v, 1);
      if(v >= 1) clearInterval(fade);
    }, 60);
  }

  let typing = false;
  let timer = null;

  function typewriter(str, cps){
    if(timer) clearTimeout(timer);
    typing = true;
    dialogue.textContent = "";
    let i = 0;
    const delay = Math.max(10, 1000 / cps);

    function tick(){
      if(!typing) return;
      dialogue.textContent += str[i++];
      if(i < str.length){
        timer = setTimeout(tick, delay);
      } else {
        typing = false;
        lookAroundWrap.classList.add("visible");
      }
    }
    tick();
  }

  dialogue.addEventListener("click", () => {
    if(typing){
      typing = false;
      if(timer) clearTimeout(timer);
      dialogue.textContent = text;
      lookAroundWrap.classList.add("visible");
    }
  });

  beginBtn.addEventListener("click", async () => {
    startScreen.style.display = "none";

    try{ await music.play(); }catch(e){}
    fadeInMusic();

    frameWrapper.classList.add("visible");

    await sleep(700);
    logoImg.classList.add("visible");

    await sleep(3000);
    logoImg.classList.remove("visible");

    await sleep(600);
    dialogueWrap.classList.add("visible");
    typewriter(text, 38);
  });

  lookAroundBtn.addEventListener("click", () => {
    window.location.href = "start2.html";
  });
});
</script>

</body>
</html>

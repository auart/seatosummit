<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sea to Summit</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden; /* no scroll */
      background: #000;
    }

    /* main stage, 1920x1080, scaled to fit screen */
    .stage-wrap {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
    }

    .stage {
      position: relative;
      width: 1920px;
      height: 1080px;
      transform-origin: center center;
    }

    /* scale stage to fit window */
    @media (max-aspect-ratio: 16/9) {
      .stage { transform: scale(calc(100vw / 1920)); }
    }
    @media (min-aspect-ratio: 16/9) {
      .stage { transform: scale(calc(100vh / 1080)); }
    }

    /* layers */
    .layer {
      position: absolute;
      left: 0;
      top: 0;
      width: 1920px;
      height: 1080px;
      pointer-events: none;
    }

    /* start button */
    .start-screen {
      position: absolute;
      left: 0;
      top: 0;
      width: 1920px;
      height: 1080px;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: auto;
      opacity: 1;
      transition: opacity 600ms ease;
    }

    .btn {
      position: relative;
      width: 420px;
      height: 150px;
      cursor: pointer;
      user-select: none;
    }

    .btn img {
      width: 100%;
      height: 100%;
      display: block;
      image-rendering: pixelated;
    }

    .btn .label {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: monospace;
      font-size: 44px;
      color: #2b1b10;
      letter-spacing: 1px;
    }

    /* reveal group */
    .reveal {
      opacity: 0;
      transition: opacity 900ms ease;
    }

    .visible {
      opacity: 1 !important;
    }

    /* frame */
    #frameImg {
      image-rendering: pixelated;
    }

    /* window numbers from Illustrator */
    :root {
      --win-x: 963.8801px;
      --win-y: 440.1124px;
      --win-w: 919.8045px;
      --win-h: 607.4107px;
    }

    /* picture viewport inside the frame */
    .picture-window {
      position: absolute;
      left: var(--win-x);
      top: var(--win-y);
      width: var(--win-w);
      height: var(--win-h);
      overflow: hidden;
      pointer-events: none;
    }

    .picture-window img {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      object-fit: cover; /* fill the window */
      image-rendering: pixelated;
    }

    /* waves overlay, slightly bigger so movement doesn't reveal edges */
    .waves {
      position: absolute;
      left: -40px;
      top: 0;
      width: calc(100% + 80px);
      height: 100%;
      opacity: 0.9;
      mix-blend-mode: screen;
      animation: wavesSlide 2.8s ease-in-out infinite alternate;
    }

    @keyframes wavesSlide {
      from { transform: translateX(-18px); }
      to   { transform: translateX(18px); }
    }

    /* logo centered inside the same picture window */
    .logo-wrap {
      position: absolute;
      left: var(--win-x);
      top: var(--win-y);
      width: var(--win-w);
      height: var(--win-h);
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      opacity: 0;
      transition: opacity 800ms ease;
    }

    #logoImg {
      max-width: 92%;
      max-height: 92%;
      image-rendering: pixelated;
    }

    /* typewriter text sits in your lower textbox area visually, but we'll position it on stage */
    .story-text {
      position: absolute;
      left: 0;
      top: 0;
      width: 1920px;
      height: 1080px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 600ms ease;
    }

    /* adjust these if you want later */
    .story-text .inner {
      position: absolute;
      left: 820px;
      top: 785px;
      width: 920px;
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px 20px;
      text-align: center;
      font-family: monospace;
      font-size: 24px;
      color: #2b1b10;
      line-height: 1.4;
      letter-spacing: 1px;
      white-space: pre-wrap;
    }

    /* choice button (Look Around) */
    .choice-area {
      position: absolute;
      left: 0;
      top: 0;
      width: 1920px;
      height: 1080px;
      display: flex;
      justify-content: center;
      align-items: flex-end;
      padding-bottom: 120px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 600ms ease;
    }

    .choice-area .btn {
      pointer-events: auto;
      width: 520px;
      height: 170px;
    }

  </style>
</head>

<body>
  <div class="stage-wrap">
    <div class="stage">

      <!-- Start screen -->
      <div id="startScreen" class="start-screen">
        <div id="startBtn" class="btn" role="button" aria-label="Begin">
          <img src="stsbutton.png" alt="button" />
          <div class="label">Begin</div>
        </div>
      </div>

      <!-- Reveal group -->
      <div id="revealGroup" class="reveal layer">

        <!-- picture window -->
        <div class="picture-window">
          <img id="sceneImg" src="island_base.png" alt="scene" />
          <img class="waves" id="wavesImg" src="water_overlay.png" alt="waves overlay" />
        </div>

        <!-- frame on top -->
        <img id="frameImg" class="layer" src="stsframe2.png" alt="frame" />

        <!-- logo centered inside the picture window -->
        <div id="logoWrap" class="logo-wrap">
          <img id="logoImg" src="stslogo2.png" alt="Sea to Summit logo" />
        </div>

        <!-- story text -->
        <div id="storyText" class="story-text">
          <div id="storyInner" class="inner"></div>
        </div>

        <!-- Look Around -->
        <div id="choiceArea" class="choice-area">
          <div id="lookBtn" class="btn" role="button" aria-label="Look Around">
            <img src="stsbutton.png" alt="button" />
            <div class="label">Look Around</div>
          </div>
        </div>

      </div>

      <audio id="bgm" src="starttheme.m4a" preload="auto"></audio>

    </div>
  </div>

  <script>
    const startScreen = document.getElementById('startScreen');
    const startBtn = document.getElementById('startBtn');
    const revealGroup = document.getElementById('revealGroup');
    const bgm = document.getElementById('bgm');

    const logoWrap = document.getElementById('logoWrap');

    const storyText = document.getElementById('storyText');
    const storyInner = document.getElementById('storyInner');

    const choiceArea = document.getElementById('choiceArea');
    const lookBtn = document.getElementById('lookBtn');

    const fullLine = "You wake up on a beach. Warm sand, slow waves, no memory of how you got here.";
    let typing = false;
    let finished = false;
    let typeTimer = null;

    function fadeInAudio(audioEl, durationMs = 1500) {
      audioEl.volume = 0;
      const playPromise = audioEl.play();
      if (playPromise) playPromise.catch(() => {});
      const steps = 30;
      let i = 0;
      const step = 1 / steps;
      const interval = durationMs / steps;
      const t = setInterval(() => {
        i++;
        audioEl.volume = Math.min(1, i * step);
        if (i >= steps) clearInterval(t);
      }, interval);
    }

    function typeWriter(text, speed = 28) {
      typing = true;
      finished = false;
      storyInner.textContent = "";
      let i = 0;

      typeTimer = setInterval(() => {
        i++;
        storyInner.textContent = text.slice(0, i);
        if (i >= text.length) {
          clearInterval(typeTimer);
          typing = false;
          finished = true;
          // show choice
          setTimeout(() => {
            choiceArea.classList.add('visible');
          }, 250);
        }
      }, speed);
    }

    function finishTypingNow() {
      if (!typing) return;
      clearInterval(typeTimer);
      typing = false;
      finished = true;
      storyInner.textContent = fullLine;
      choiceArea.classList.add('visible');
    }

    // click anywhere to finish text once it starts
    document.addEventListener('click', (e) => {
      if (startScreen.style.pointerEvents === 'none') {
        if (typing) finishTypingNow();
      }
    });

    startBtn.addEventListener('click', () => {
      // fade out start screen
      startScreen.style.pointerEvents = 'none';
      startScreen.style.opacity = '0';

      // fade in audio + visuals
      fadeInAudio(bgm, 1800);

      setTimeout(() => {
        revealGroup.classList.add('visible');
      }, 200);

      // logo fade in after frame appears
      setTimeout(() => {
        logoWrap.classList.add('visible');
      }, 900);

      // logo fade out after 3 seconds
      setTimeout(() => {
        logoWrap.classList.remove('visible');
      }, 3900);

      // show story text and start typewriter
      setTimeout(() => {
        storyText.classList.add('visible');
        typeWriter(fullLine, 26);
      }, 4300);
    });

    lookBtn.addEventListener('click', () => {
      window.location.href = "start2.html";
    });
  </script>
</body>
</html>
